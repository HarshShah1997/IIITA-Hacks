<!-- This file fetches the list of IPs along with their files -->
<html>
<head>
	<title>Download Page</title>
</head>
<body>
	{% for key in database %}
		<button type="button" id = "file" onclick="request()">{{ database[key] }}</button>
		<p> {{ key }} </p>
		<!-- Upon click, an AJAX call from the hosted server will be sent to the requesting client giving the IP address -->
		<script type="text/javascript">
			function request() {
				var async = new XMLHttpRequest();
				async.open("POST", "http://localhost:4998/receive", true);
				async.setRequestHeader("Content-type", "application/x-www-form-urlencoded");     //for a post request
				async.send("ip_addr={{ database[key] }}&file_name={{ key }}");
			}
		</script>
	{% endfor %}
</body>
</html>
